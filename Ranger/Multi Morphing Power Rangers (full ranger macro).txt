// Ranger v1.2.0
// By Magnic
// inbetween the "" type int your morphs name, 
// you can leave the name spaces blank it will skip over them
// type /ranger to find out all the commands and keys.

setglobal index[1] "Whipper Wyrm"
setglobal index[2] "Lesser Sarra'don"
setglobal index[3] "Albino Flying Foxweir"
setglobal index[4] "Hungry Mountain Bear"
setglobal index[5] "Glacier Bear"
setglobal index[6] "Dire Bear"
setglobal index[7] "Skeletal"
setglobal index[8] "Ebb Meshra"
setglobal index[9] "Banshee"
setglobal index[10] "Detached Spirit"
setglobal index[11] "Black Locust"
setglobal index[12] "Deadly Hornet"
setglobal index[13] "Mountain Wasp"
setglobal index[14] "Shadowcat"
setglobal index[15] ""
setglobal index[16] ""
setglobal index[17] ""
setglobal index[18] ""
setglobal index[19] ""
setglobal index[20] ""

SETGLOBAL findex 1
SETGLOBAL MorphName ""
SETGLOBAL isMorphed 0
SETGLOBAL savMorphName ""
SETGLOBAL speeding 0
SETGLOBAL swaobackL ""

"/ranger"
{
message "F1 = move up the Morph list"
pause 1
message "F2 = toggle morph (on / off)"
pause 1
message "F3 = move down the Morph list"
pause 1
message "F4 = HeartWood Charm (on / off)"
pause 1
message "F5 = Befriend"
pause 1
message "F6 = Control Befriend'ed"
pause 1
message "F7 = Dismiss Friend"
pause 1
message "/reflect = Use's Belt to reflect what you have learned"
pause 1
message "/judge <exile's name> = judges another on how close to ranger-hood they are"
pause 1
message "F10 = reset macro"
}

F1
{
setglobal findex + 1
if index[findex] != ""
	setglobal MorphName index[findex]
		message "* Morph set to " MorphName " morph number " findex ""
else if index[findex] == ""
	setglobal lsck 1
		call checkls
else if index[findex] == Nothing
	setglobal findex 1
end if
}

F2
{
if @my.waist_item != "belt of the wild"
	"/equip beltofthewild\r"
end if
if isMorphed == 0
SETGLOBAL isMorphed 1
	"/useitem beltofthewild /shape " MorphName " \r"
		setglobal savMorphName MorphName
end if
if isMorphed == 1
	if savMorphName == MorphName
		"/useitem beltofthewild /return\r"
	else
		"/useitem beltofthewild /shape " MorphName " \r"
			setglobal savMorphName MorphName
	end if
end if
}

F3
{
setglobal findex - 1
if index[findex] != ""
	setglobal MorphName index[findex]
		message "* Morph set to " MorphName " morph number " findex ""
else if index[findex] == ""
	setglobal lsck 0
		call checkls
else if index[findex] == Nothing
	setglobal findex 1
end if
}

checkls
{
label tryagain
if lsck == 1
	setglobal findex + 1
else if lsck == 0
	setglobal findex - 1
end if
pause 1
if index[findex] == ""
	goto tryagain
else
	message "* Morph set to " MorphName " morph number " findex ""
end if	
}

F4
{
if speeding == 0
	if @my.left_item != "Nothing"
		if @my.left_item != "Heartwood Charm"
			setglobal swaobackL @my.left_item
		end if
	end if
	if @my.left_item != "Heartwood Charm"
		"/equip heartwood\r"
	end if
		SETGLOBAL speeding 1		
			"/useitem left\r"
else
	if speeding == 1
		SETGLOBAL speeding 0
			if @my.left_item == "Heartwood Charm"
				"/useitem heartwood /slow \r"
					call uneq
			end if
	end if
end if
}

F5
{
"/useitem belt /befriend\r"
}

F6
{
"/useitem belt /control\r"
}

F7 
{
"/useitem belt /dismiss\r"
}

"/reflect"
{
if @my.waist_item != "belt of the wild"
	"/equip beltofthewild\r"
end if
	"/useitem beltofthewild /reflect\r"
}

@login
{
message "Type /ranger for commands"
label rangerloop
set logck @env.textlog
set hasfallen @my.name 
set hasfallen + " has fallen to a"
if logck >= "You return"
	SETGLOBAL isMorphed 0
end if
if logck >= "Using /SHARE to create a spirit link"
	if isMorphed == 1
		SETGLOBAL isMorphed 0
	else if isMorphed == 0
		SETGLOBAL speeding 0
			goto uneq
	end if
end if
if logck >= "You are already in"
	SETGLOBAL isMorphed 0
end if
if logck >= "cannot possibly use"
	if isMorphed == 1
		SETGLOBAL isMorphed 0
	end if
	if speeding == 1
		SETGLOBAL speeding 0
			goto uneq
	end if
end if
if logck >= hasfallen
	if isMorphed == 1
		SETGLOBAL isMorphed 0
	else if isMorphed == 0
		SETGLOBAL speeding 0
			goto uneq
	end if
end if
if logck >= "You slow down"
	if speeding == 1
		SETGLOBAL speeding 0
			goto uneq
	end if
end if
goto rangerloop
}

uneq
{
if swaobackL != "Heartwood Charm"
	if swaobackL != ""
		message "* swapping left hand back to" swaobackL " "
			"/equip " swaobackL " \r"
				SETGLOBAL swaobackL ""
	else
		if @my.left_item == "Heartwood Charm"
			"/unequip heartwood \r"
		end if
	end if
end if
}

F10
{
"/useitem beltofthewild /return\r"
"/unequip heartwood \r"
SETGLOBAL speeding 0
SETGLOBAL MorphName ""
SETGLOBAL isMorphed 0
SETGLOBAL savMorphName ""
SETGLOBAL findex 1
SETGLOBAL swaobackL ""
}

"/judge"
{
if @my.waist_item != "belt of the wild"
	"/equip beltofthewild\r"
end if
if @text.word[0] != ""
	setglobal theJudged @text.word[0]
		"/useitem belt /judge " theJudged "\r"
			call judgemenot
else if @text.word[0] == ""
	message "* judge not that ye be not judged"
end if
}

judgemenot
{
pause 3
set logck @env.textlog
if logck >= "has barely begun to learn about the earth."
	"/ponder " theJudged " has barely begun to learn about the earth.\r"
		message "* 8 more messages to go."
else if logck >= "has begun to learn about the earth."
	"/ponder " theJudged " has begun to learn about the earth.\r"
		message "* 7 more messages to go."
else if logck >= "still has much to learn about the earth."
	"/ponder " theJudged " still has much to learn about the earth.\r"
		message "* 6 more messages to go."
else if logck >= "is making progress towards becoming a Ranger."
	"/ponder " theJudged " is making progress towards becoming a Ranger.\r"
		message "* 5 more messages to go."
else if logck >= "is making good progress towards becoming a Ranger."
	"/ponder " theJudged " is making good progress towards becoming a Ranger.\r"
		message "* 4 more messages to go."
else if logck >= "is making excellent progress towards becoming a Ranger."
	"/ponder " theJudged " is making excellent progress towards becoming a Ranger.\r"
		message "* 3 more messages to go."
else if logck >= "is knowledgeable about the earth."
	"/ponder " theJudged " is knowledgeable about the earth.\r"
		message "* 2 more messages to go."
else if logck >= "is very knowledgeable about the earth."
	"/ponder " theJudged " is very knowledgeable about the earth.\r"
		message "* 1 more message to go."
else if logck >= "is nearly ready to become a Ranger."
	"/ponder " theJudged " is nearly ready to become a Ranger.\r"
		message "* Ready for Rangerhood."
else if logck >= "has chosen another path and cannot become a Ranger."
	"/ponder " theJudged " has chosen another path and cannot become a Ranger.\r"
end if
}


// Lastie Beta 2.0
// by Magnic

setglobal last_names ""
setglobal last_monsters ""

"/last"
{
	if @text.num_words < 2
		message "Usage: /last <name> <monster>"
			goto end
	end if

	// monster = last word
	set Mname @text.word[@text.num_words-1]

	// build name from all words before last
	set Pname @text.word[0]
		set i 1
label buildname
	if i < @text.num_words-1
		set Pname + " "
			set Pname + @text.word[i]
				set i + 1
					goto buildname
	end if

	// append each as one entry
	setglobal last_names + Pname
	setglobal last_monsters + Mname
		message "" Pname " Lastie:" Mname ""
label end
}

"/lasts"
{
	set names last_names
	set monsters last_monsters
	set limit names.num_words
	set i 0
label loop
	if i < limit
		"/NARRATE " names.word[i] " Lastie:" monsters.word[i] "\r"
			set i + 1
				goto loop
	end if
}

"/lastclear"
{
setglobal last_names ""
	setglobal last_monsters ""
		message "Lastie cleared."
}
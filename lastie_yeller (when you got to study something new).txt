// Lastie Yeller v0.5
// by Magnic
// working.

"/ly"
{
message "* Lastie Yeller ON!"
label top
set logck @env.textlog
if logck >= "Strike a monster to begin studying it."
	if logck.word[0] == "Strike"
		SETGLOBAL findnumb1 3
		SETGLOBAL findnumb2 4
		SETGLOBAL findnumb3 5
		SETGLOBAL findnumb4 0
		SETGLOBAL findnumb5 1
		SETGLOBAL findnumb6 6
	else if logck.word[2] == "Strike"
		SETGLOBAL findnumb1 5
		SETGLOBAL findnumb2 6
		SETGLOBAL findnumb3 7
		SETGLOBAL findnumb4 2
		SETGLOBAL findnumb5 3
		SETGLOBAL findnumb6 8
	else
		pause 3
			goto top
	end if
	call findname
		"/yell NEW LASTIE: " Nfirstname " " Nsecondname " " Nthirdname "\r"
end if
pause 3
goto top
}

findname
{
label top
set logck @env.textlog
if logck.word[findnumb3] == "helped"
	SETGLOBAL findnumb5 + 1
end if
if logck.word[findnumb5] == "Vanquish"
	call findit
		goto stop
else if logck.word[findnumb5] == "Kill"
	call findit
		goto stop
else if logck.word[findnumb5] == "Dispatch"
	call findit
		goto stop
else if logck.word[findnumb5] == "slaughtered"
	call findit
		goto stop
end if
goto top
label stop
}

findit
{
set firstname logck.word[findnumb1]
set secondname logck.word[findnumb2]
set thirdname logck.word[findnumb3]
set forthname logck.word[findnumb6]
if firstname != ""
	SETGLOBAL Nfirstname firstname
	if firstname >= "."
		SETGLOBAL Nsecondname ""
		SETGLOBAL Nthirdname ""
		SETGLOBAL Nforthname ""
		goto end
	end if
else if secondname != ""
	SETGLOBAL Nsecondname secondname
	if secondname >= "."
		SETGLOBAL Nthirdname ""
		SETGLOBAL Nforthname ""
		goto end
	end if
else if thirdname != ""
	SETGLOBAL Nthirdname thirdname
	if thirdname >= "."
		SETGLOBAL Nforthname ""
			goto end
	end if
else if forthname != ""
	SETGLOBAL Nforthname forthname
	end if
else
	goto end
end if
label end
}
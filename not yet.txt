// Store dot-formatted name
setglobal dotname @my.name
setglobal dotname + "."

// Determine name word count
@login
{
    if @my.name.num_words == 1
        setglobal namenum 1
    else if @my.name.num_words == 2
        setglobal namenum 2
    else if @my.name.num_words == 3
        setglobal namenum 3
    end if

    // --- Helper: Build name from log words ---
    @buildname startIndex
        if namenum == 1
            set Bname logck.word[startIndex]
        else if namenum == 2
            set Bname logck.word[startIndex]
            set Bname + " "
            set Bname + logck.word[startIndex+1]
        else if namenum == 3
            set Bname logck.word[startIndex]
            set Bname + " "
            set Bname + logck.word[startIndex+1]
            set Bname + " "
            set Bname + logck.word[startIndex+2]
        end if
    @end

    // --- Helper: Compare and whisper ---
    @checkname startIndex
        @buildname startIndex
        if Bname == dotname
            "/whisper yes \r"
        end if
    @end

label boatloop

    // --- Boat cases ---
    if logck >= "My fine boats"
        if logck.word[3] >= "Ah,"
            @checkname 4
        else if logck.word[5] >= "Ah,"
            @checkname 6
        else if logck.word[4] >= "Ah,"
            @checkname 5
        end if
    end if

    // --- Skiff cases ---
    if logck >= "river skiff. Interested?"
        if logck.word[2] >= "Hello,"
            @checkname 3
        else if logck.word[3] >= "Hello,"
            @checkname 4
        else if logck.word[4] >= "Hello,"
            @checkname 5
        end if
    end if

    pause 3
    goto boatloop
}
